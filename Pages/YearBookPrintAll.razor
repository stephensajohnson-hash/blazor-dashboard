@page "/year-book-print-all/{Year:int}"
@using Dashboard
@using Microsoft.JSInterop
@layout EmptyLayout
@rendermode @(new Microsoft.AspNetCore.Components.Web.InteractiveServerRenderMode(prerender: false))

@inject IJSRuntime JS

<div class="print-controls bg-gray-900 p-4 sticky top-0 z-[200] flex justify-between items-center border-b border-blue-900/50 no-print">
    <div class="flex items-center gap-4">
        <div class="w-3 h-3 rounded-full bg-green-500 animate-pulse"></div>
        <h1 class="text-white font-black uppercase tracking-widest text-sm">Year Book Ready: @Year</h1>
    </div>
    <button @onclick="TriggerPrint" class="bg-blue-600 hover:bg-blue-500 text-white px-8 py-2 rounded-full font-black shadow-2xl transition-all active:scale-95">
        PRINT TO PDF
    </button>
</div>

<div class="print-book bg-white">
    <div class="print-page cover-page flex flex-col items-center justify-center border-[20px] border-black m-10 h-[10in]">
        <h1 class="text-[12rem] font-black tracking-tighter uppercase mb-0 text-black">@Year</h1>
        <div class="h-4 w-48 bg-black mb-12"></div>
        <h2 class="text-3xl font-bold tracking-[0.8em] uppercase text-gray-500">Year Book</h2>
        <div class="mt-60 text-lg font-mono uppercase tracking-widest text-gray-400 font-bold">Stephens Allen Johnson</div>
    </div>

    @for (int m = 1; m <= 12; m++)
    {
        <YearBookExport Year="Year" Month="m" />
    }
</div>

<style>
    .print-book { width: 100%; display: block; background: white; }
    .cover-page { page-break-after: always; text-align: center; }
    
    @@media print {
        .no-print { display: none !important; }
        body { margin: 0; padding: 0; background: white; }
    }
</style>

@code {
    [Parameter] public int Year { get; set; }

    private async Task TriggerPrint()
    {
        await JS.InvokeVoidAsync("print");
    }
}