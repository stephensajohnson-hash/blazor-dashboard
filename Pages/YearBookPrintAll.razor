@page "/year-book-print-all/{Year:int}"
@using Dashboard
@using Microsoft.JSInterop
@layout EmptyLayout
@rendermode @(new Microsoft.AspNetCore.Components.Web.InteractiveServerRenderMode(prerender: false))

@inject IJSRuntime JS

<div class="print-book bg-white">
    @* PAGE 1: THE COVER PAGE (Always a Right-side page) *@
    <div class="print-page cover-page flex flex-col items-center justify-center border-8 border-black m-10 h-[10in]">
        <h1 class="text-8xl font-black tracking-tighter uppercase mb-4">@Year</h1>
        <div class="h-1 w-32 bg-black mb-8"></div>
        <h2 class="text-2xl font-bold tracking-[0.5em] uppercase text-gray-400">Year Book</h2>
        <div class="mt-40 text-sm font-mono uppercase tracking-widest text-gray-300">Generated for Stephens Allen Johnson</div>
    </div>

    @* PAGES 2-N: THE MONTHS *@
    @for (int m = 1; m <= 12; m++)
    {
        <YearBookExport Year="Year" Month="m" />
    }
</div>

<style>
    .print-book { width: 100%; display: block; background: white; }
    .cover-page { page-break-after: always; text-align: center; }
    @@media print {
        body { margin: 0; padding: 0; background: white; }
        .print-book { display: block; }
    }
</style>

@code {
    [Parameter] public int Year { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await Task.Delay(10000); // Give plenty of time for 12 months of DB calls and images
            await JS.InvokeVoidAsync("print");
        }
    }
}