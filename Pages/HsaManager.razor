@page "/hsa"
@using Microsoft.AspNetCore.Components.Web
@rendermode @(new Microsoft.AspNetCore.Components.Web.InteractiveServerRenderMode(prerender: false))

<div style="background:#000; color:#fff; min-height:100vh; padding:50px; font-family:sans-serif;">
    <h1 style="color:#3b82f6;">CIRCUIT TEST</h1>

    @* DAMN BUTTON *@
    <button @onclick="LogToConsole" 
            style="background:#2563eb; color:#fff; padding:20px 40px; border:none; border-radius:10px; font-weight:bold; cursor:pointer; font-size:1.5rem;">
        LOG
    </button>

    <div style="margin-top:30px; background:#111; border:1px solid #333; padding:20px; border-radius:10px;">
        <div style="color:#666; font-size:0.8rem; margin-bottom:10px; border-bottom:1px solid #222;">UI LOG OUTPUT</div>
        <pre style="color:#10b981; font-family:monospace;">
@foreach (var line in testLogs)
{
@line
}
        </pre>
    </div>
</div>

@code {
    private List<string> testLogs = new();

    protected override void OnInitialized()
    {
        // This proves the page loaded
        string msg = "SYSTEM: Initialized at " + DateTime.Now.ToString("HH:mm:ss");
        testLogs.Add(msg);
        Console.WriteLine(msg);
    }

    private void LogToConsole()
    {
        // This proves the button click traveled from browser to server and back
        string msg = "CLICK: 'log' at " + DateTime.Now.ToString("HH:mm:ss");
        testLogs.Add(msg);
        
        // This will show up in your Render Logs
        Console.WriteLine("HSA_TEST_DEBUG: " + msg);
        
        StateHasChanged();
    }
}