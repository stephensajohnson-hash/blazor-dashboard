@namespace Dashboard.Components.Bullet
@using Dashboard

<div style="border: 2px solid #a855f7; background-color: #1f2937; padding: 10px; margin-bottom: 10px; display: block; min-height: 50px; color: white;">
    
    <div style="display: flex; justify-content: space-between;">
        <strong>@Item.Title</strong>
        <span style="color: #d8b4fe;">
            @(Item.MeetingDetail.StartTime?.ToString("h:mm tt") ?? "No Time")
        </span>
    </div>

    @if(!string.IsNullOrEmpty(Item.Description)) {
        <div style="font-size: 0.8rem; color: #9ca3af; margin-top: 5px;">@Item.Description</div>
    }

    <div style="margin-top: 8px; font-size: 0.75rem;">
        <button @onclick="HandleClick" style="margin-right: 10px; cursor: pointer; color: #60a5fa;">[Edit]</button>
        <button @onclick="HandleDelete" style="cursor: pointer; color: #f87171;">[Delete]</button>
    </div>

</div>

@code {
    [Parameter] public BulletTaskService.TaskDTO Item { get; set; } = new();
    
    [Parameter] public EventCallback<BulletTaskService.TaskDTO> OnClick { get; set; }
    [Parameter] public EventCallback<BulletTaskService.TaskDTO> OnToggle { get; set; }
    [Parameter] public EventCallback<int> OnDelete { get; set; }

    protected override void OnInitialized()
    {
        Console.WriteLine($"[COMPONENT] MeetingCard Initialized for: {Item.Title}");
    }

    private async Task HandleClick() => await OnClick.InvokeAsync(Item);
    private async Task HandleDelete() => await OnDelete.InvokeAsync(Item.Id);
}