@namespace Dashboard.Components.Bullet
@using Dashboard

<div class="bg-gray-900 border border-gray-700 border-l-4 border-l-pink-500 rounded-r-lg mb-3 relative group shadow-sm flex flex-col transition hover:border-pink-400">
    
    <div class="flex-1 flex flex-col p-3 min-w-0">
            <h4 class="text-sm font-bold leading-tight text-white mb-1">
                @if(!string.IsNullOrEmpty(Item.LinkUrl)) { <a href="@Item.LinkUrl" target="_blank" class="hover:text-pink-400 hover:underline transition">@Item.Title</a> }
                else { @Item.Title }
            </h4>
            
            <div class="flex items-center gap-2 mb-2 text-xs">
                @if(Item.Detail != null && Item.Detail.ReleaseYear > 0) { 
                    <span class="bg-gray-800 text-gray-400 px-1.5 rounded">@Item.Detail.ReleaseYear</span> 
                }
                @if(Item.Detail != null && Item.Detail.Rating > 0) { 
                    <span class="text-yellow-400 font-bold">‚≠ê @Item.Detail.Rating/10</span> 
                }
            </div>

            @if(!string.IsNullOrEmpty(Item.Description)) {
                <p class="text-xs text-gray-400 line-clamp-3 mb-2">@Item.Description</p>
            }

            @if(Item.Detail != null && !string.IsNullOrEmpty(Item.Detail.Tags))
            {
                <div class="flex flex-wrap gap-1 mt-auto">
                    @foreach(var tag in Item.Detail.Tags.Split(','))
                    {
                        <span class="text-[9px] bg-pink-900/30 text-pink-300 px-1 rounded border border-pink-900/50">@tag.Trim()</span>
                    }
                </div>
            }
        </div>
    </div>
    
    </div>

@code {
    [Parameter] public BulletMediaService.MediaDTO Item { get; set; } = new();
    [Parameter] public EventCallback<BulletMediaService.MediaDTO> OnClick { get; set; }
    [Parameter] public EventCallback<int> OnDelete { get; set; }

    private async Task HandleClick() => await OnClick.InvokeAsync(Item);
    private async Task HandleDelete() => await OnDelete.InvokeAsync(Item.Id);
}