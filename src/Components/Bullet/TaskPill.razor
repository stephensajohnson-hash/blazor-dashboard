@namespace Dashboard.Components.Bullet
@using Dashboard

<div class="bg-gray-900 border border-gray-800 rounded mb-1 overflow-hidden cursor-pointer hover:border-blue-500 transition flex group" @onclick="HandleClick">
    @if(!string.IsNullOrEmpty(Task.ImgUrl))
    {
        <div class="relative bg-black shrink-0" style="width: @ImageWidth;">
            <img src="@Task.ImgUrl" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition" />
        </div>
    }
    <div class="p-1 flex-1 min-w-0 flex items-center">
        <div class="truncate text-[10px] text-gray-300 group-hover:text-white transition w-full">
            @if(Task.Type == "meeting") { <span>ü§ù </span> }
            @if(Task.Type == "task" && Task.Detail.IsCompleted) { <span class="text-green-500">‚úì </span> }
            @Task.Title
        </div>
    </div>
</div>

@code {
    [Parameter] public BulletTaskService.TaskDTO Task { get; set; } = new();
    [Parameter] public string ImageWidth { get; set; } = "20%";
    [Parameter] public EventCallback<BulletTaskService.TaskDTO> OnClick { get; set; }

    private async Task HandleClick() => await OnClick.InvokeAsync(Task);
}